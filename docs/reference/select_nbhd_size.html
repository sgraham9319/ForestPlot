<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Select neighborhood size — select_nbhd_size • forestexplorR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Select neighborhood size — select_nbhd_size" />
<meta property="og:description" content="Fits tree growth or mortality models using neighborhood metrics based on
differing neighborhood sizes, calculating mean square error of each model,
and thereby providing useful data on the appropriate neighborhood size for
analysis. It is strongly recommended that this sensitivity analysis or a
similar one is used to select a neighborhood size for modeling because the
appropriate neighborhood size varies between study systems and ecological
processes." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">forestexplorR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/data-format.html">Data formatting</a>
    </li>
    <li>
      <a href="../articles/describe-nbhds.html">Describing neighborhoods</a>
    </li>
    <li>
      <a href="../articles/growth-calc.html">Calculating growth rates</a>
    </li>
    <li>
      <a href="../articles/model-growth.html">Modeling tree growth and mortality</a>
    </li>
    <li>
      <a href="../articles/nbhd_size.html">Selecting neighborhood size</a>
    </li>
    <li>
      <a href="../articles/visualizations.html">Visualizing mapped stands</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sgraham9319/forestexplorR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Select neighborhood size</h1>
    <small class="dont-index">Source: <a href='https://github.com/sgraham9319/forestexplorR/blob/master/R/select_nbhd_size.R'><code>R/select_nbhd_size.R</code></a></small>
    <div class="hidden name"><code>select_nbhd_size.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fits tree growth or mortality models using neighborhood metrics based on
differing neighborhood sizes, calculating mean square error of each model,
and thereby providing useful data on the appropriate neighborhood size for
analysis. It is strongly recommended that this sensitivity analysis or a
similar one is used to select a neighborhood size for modeling because the
appropriate neighborhood size varies between study systems and ecological
processes.</p>
    </div>

    <pre class="usage"><span class='fu'>select_nbhd_size</span><span class='op'>(</span>
  <span class='va'>radii</span>,
  <span class='va'>map_data</span>,
  <span class='va'>model_process</span>,
  <span class='va'>tree_data</span>,
  abiotic_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>focal_sps</span>,
  <span class='va'>dens_type</span>,
  edge_handling <span class='op'>=</span> <span class='cn'>F</span>,
  <span class='va'>max_x</span>,
  <span class='va'>max_y</span>,
  rare_sps <span class='op'>=</span> <span class='fl'>100</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>radii</th>
      <td><p>Vector of the neighborhood radii to try.</p></td>
    </tr>
    <tr>
      <th>map_data</th>
      <td><p>Data frame containing tree coordinates.</p></td>
    </tr>
    <tr>
      <th>model_process</th>
      <td><p>Character determining type of process to be modeled
(i.e. <code>"growth"</code> or <code>"mortality"</code>).</p></td>
    </tr>
    <tr>
      <th>tree_data</th>
      <td><p>Tree measurement data frame containing size or mortality
data for trees in <code>map_data</code> (see built-in dataset <code>tree</code> for an
example). If <code>model_process = "mortality"</code>, <code>tree_data</code> must
contain a <code>mort</code> column where 1 and 0 values indicate dead and alive
respectively. If <code>model_process = "growth"</code>, <code>tree_data</code> must
contain repeated DBH measurements in a <code>dbh</code> column. Additional
columns are permitted.</p></td>
    </tr>
    <tr>
      <th>abiotic_data</th>
      <td><p>Data frame containing abiotic data for each of the stands
in <code>map_data</code>. Must contain a stand_id column. All other columns will be
included as explanatory variables in the fitted models. This argument is
optional.</p></td>
    </tr>
    <tr>
      <th>focal_sps</th>
      <td><p>Vector of species names (i.e. character strings) for which
a neighborhood size should be selected.</p></td>
    </tr>
    <tr>
      <th>dens_type</th>
      <td><p>Method for calculating tree densities in each neighborhood.
Must take one of the values: <code>"raw"</code>, <code>"proportional"</code>, or
<code>"angular"</code>. See <code><a href='neighborhood_summary.html'>?neighborhood_summary</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>edge_handling</th>
      <td><p>Boolean indicating whether trees whose neighborhood
overlaps the stand boundary should have their neighborhood metrics adjusted
to account for the unsampled portion of their neighborhood. If FALSE, these
trees will be excluded from the analysis as focals.</p></td>
    </tr>
    <tr>
      <th>max_x</th>
      <td><p>Maximum expected x coordinate (i.e. should be 100 if the stands
are 100 x 100 m).</p></td>
    </tr>
    <tr>
      <th>max_y</th>
      <td><p>Maximum expected y coordinate.</p></td>
    </tr>
    <tr>
      <th>rare_sps</th>
      <td><p>Minimum number of interactions a competitor species must
appear in to remain separate from the "RARE" category in the models
(see <code><a href='growth_model.html'>?growth_model</a></code> or <code><a href='mortality_model.html'>?mortality_model</a></code> for details). If not
specified, this argument will default to a value of 100 interactions.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list containing a number of named elements (exact number will be
the number of <code>focal_sps</code> plus one:</p><ul>
<li><p><code>mse_vals</code> is a data frame containing the mean square error of
the fitted model for each <code>focal_sps</code> using each neighborhood size
listed in <code>radii</code>.</p></li>
<li><p>each additional element of the list will be a plot of model mean square
error vs. neighborhood size for one of the <code>focal_sps</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function uses a data frame of tree coordinates (<code>map_data</code>) to
calculate a series of metrics to describe the neighborhoods around each tree.
It does this by applying the <code>neighborhoods</code> and then the
<code>neighborhood_summary</code> functions. It is therefore necessary to provide,
under the argument <code>dens_type</code>, instruction for the method that
<code>neighborhood_summary</code> should use to calculate densities. It is also
possible to conduct edge handling by setting <code>edge_handling = T</code>. This
process is repeated for each of the neighborhood sizes specified by the
argument <code>radii</code>. If <code>edge_handling = F</code>, trees whose neighborhood
overlaps the stand boundary will be excluded from modeling. Boundary overlap
is determined using the largest neighborhood size in <code>radii</code> to ensure
the number of focal trees is constant across neighborhood sizes.</p>
<p>The neighborhood metrics are then combined with the growth rates or mortality
status of their focal tree. If <code>model_process = "growth"</code> the
<code>size_corr_growth</code> output by <code>growth_summary</code> will be used as
the dependent variable (any trees with illogical negative annual growth rates
are excluded as focal trees). If the user also provides abiotic data for the
stands using the argument <code>abiotic_data</code>, these are also joined to the
neighborhood metric and growth/mortality data. The result is a design matrix
that is given to the <code>growth_model</code> or <code>mortality_model</code> function,
depending on the value of <code>model_process</code>. This entire process is
repeated for each neighborhood size (<code>radii</code>) and <code>focal_sps</code>,
with the mean square error of each resulting model being recorded. The
function outputs a list containing a data frame of all mean square error
values and a plot of mean square error vs. neighborhood size for each
<code>focal_sps</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># See vignette "Selecting neighborhood size"</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/sgraham9319'>Stuart Graham</a>, <a href='https://github.com/arokem'>Ariel Rokem</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


