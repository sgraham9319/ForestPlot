<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Model tree mortality — mortality_model • ForestPlotR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Model tree mortality — mortality_model" />
<meta property="og:description" content="Fits regularized logistic regression models of tree mortality for a single
species, returning the model object, its growth predictions, its coefficient
of determination when applied to the training set (and optionally, a
user-provided test set), and the fitted model coefficients." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ForestPlotR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/data-format.html">Data formatting</a>
    </li>
    <li>
      <a href="../articles/describe-nbhds.html">Describing neighborhoods</a>
    </li>
    <li>
      <a href="../articles/growth-calc.html">Calculating growth rates</a>
    </li>
    <li>
      <a href="../articles/model-growth.html">Modeling tree growth and mortality</a>
    </li>
    <li>
      <a href="../articles/nbhd_size.html">Selecting neighborhood size</a>
    </li>
    <li>
      <a href="../articles/visualizations.html">Visualizing mapped stands</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sgraham9319/ForestPlotR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Model tree mortality</h1>
    <small class="dont-index">Source: <a href='https://github.com/sgraham9319/ForestPlotR/blob/master/R/mortality_model.R'><code>R/mortality_model.R</code></a></small>
    <div class="hidden name"><code>mortality_model.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fits regularized logistic regression models of tree mortality for a single
species, returning the model object, its growth predictions, its coefficient
of determination when applied to the training set (and optionally, a
user-provided test set), and the fitted model coefficients.</p>
    </div>

    <pre class="usage"><span class='fu'>mortality_model</span><span class='op'>(</span>
  <span class='va'>training</span>,
  <span class='va'>outcome_var</span>,
  iterations <span class='op'>=</span> <span class='fl'>1</span>,
  rare_comps <span class='op'>=</span> <span class='st'>"none"</span>,
  density_suffix <span class='op'>=</span> <span class='st'>"none"</span>,
  test <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>training</th>
      <td><p>A dataframe containing a separate row for each focal x
neighbor tree pair and a column for each variable to include in the
model, including the outcome variable. Outcome variable must be numeric, with
value 1 indicating 'dead' and value 0 indicating 'alive'. Other variables can
be of any type, including character. Any character variables will be
converted to factors before fitting the model.</p></td>
    </tr>
    <tr>
      <th>outcome_var</th>
      <td><p>Name of column in <code>training</code> containing the outcome
variable, provided as a string.</p></td>
    </tr>
    <tr>
      <th>iterations</th>
      <td><p>Number of times the model should be fitted.</p></td>
    </tr>
    <tr>
      <th>rare_comps</th>
      <td><p>Minimum number of interactions a competitor species must
appear in to remain separate from the "RARE" category (see details). If not
specified, no "RARE" category will be created and all competitor species will
remain separate.</p></td>
    </tr>
    <tr>
      <th>density_suffix</th>
      <td><p>Suffix of columns containing species-specific densities
e.g. if density columns are of the form <code>speciesA_dens</code>, this argument
should have the value <code>"_dens"</code>. This optional argument is only used
if the argument <code>rare_comps</code> is specified.</p></td>
    </tr>
    <tr>
      <th>test</th>
      <td><p>An optional dataframe of test data that must be in exactly the
same format as the training data i.e. all the same columns with the same
names.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list containing four or five elements:</p><ul>
<li><p><code>mod</code> is a fitted glmnet model
object - if <code>iterations &gt; 1</code> this will be the model with the lowest
cross-validated mean square error</p></li>
<li><p><code>obs_pred</code> is a dataframe containing
observed and predicted growth - if <code>iterations &gt; 1</code> this will 
correspond to the best model</p></li>
<li><p><code>R_squared</code> is the coefficient of
determination - if <code>iterations &gt; 1</code> this will correspond to the best
model</p></li>
<li><p><code>test_R_squared</code> is the coefficient of determination of the best
model on the test data (this element will not appear if no test data are
provided)</p></li>
<li><p><code>mod_coef</code> is a data frame containing the fitted coefficients, 
cross-validated mean square error (<code>mse</code>), and coefficient of 
determination for each fitted model with rows in ascending order of 
<code>mse</code></p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All variables in the user-provided training data other than tree_id and the
indicated outcome variable are included as explanatory variables in the
model. The regularized regression model is fitted using the glmnet package.
Predictions, R-squared, and model coefficients returned are all based on the
<code>"lambda.1se"</code> model, but all models with different lambda values are
included in the returned mod object - see glmnet documentation for details.</p>
<p>As the glmnet model fitting process is stochastic, the fitted model can
differ with each run. The <code>iterations</code> argument allows the user to
specify how many times the model should be fitted. If the model is fitted
more than once, the fitted coefficients for all models will be returned
but only the model object for the best model (lowest cross-validated mean
square error) will be returned.</p>
<p>Rare competitor species can be grouped together as "RARE" for modeling if
desired. The optional argument <code>rare_comps</code> is a number indicating the
minimum number of interactions a species must appear in to remain separate
from the "RARE" category. If handling of rare competitor species is requested
and species-specific densities are included in <code>training</code>, the densities
of rare species can be summed together under "RARE_density" using the
optional argument <code>density_suffix</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># See vignette "Modeling tree growth and mortality"</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/sgraham9319'>Stuart Graham</a>, <a href='https://github.com/arokem'>Ariel Rokem</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


